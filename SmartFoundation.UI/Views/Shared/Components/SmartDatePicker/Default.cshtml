@using SmartFoundation.UI.ViewModels.SmartDatePicker
@model SmartFoundation.UI.ViewModels.SmartDatePicker.DatepickerViewModel

@{
    var modelId = Model?.Id ?? "datepicker_" + Guid.NewGuid().ToString("N").Substring(0, 8);
    var modelName = Model?.Name ?? modelId;
    var label = Model?.Label ?? string.Empty;
    var col = Model?.Col ?? "12";
    var value = Model?.Value ?? string.Empty;
    var placeholder = string.IsNullOrEmpty(Model?.PlaceHolder) ? "YYYY-MM-DD" : Model.PlaceHolder;
    var isReadOnly = Model?.IsReadOnly ?? false;
    var format = Model?.Format ?? "yyyy-mm-dd";
    var hijri = Model?.Hijri ?? false;
    var showDay = Model?.ShowDay ?? false;
    var helpText = Model?.HelpText ?? string.Empty;
}

<div class="col-xl-@col">
    @if (!string.IsNullOrEmpty(label))
    {
        <label class="block text-sm font-medium mb-2" for="@modelId">@label</label>
    }
    
    <div class="relative">
        <input 
            type="text"
            id="@modelId" 
            name="@modelName"
            class="sf-date block w-full px-4 py-2 border border-gray-300 rounded-lg"
            placeholder="@placeholder"
            value="@value"
            data-role="sf-date"
            data-date-format="@format"
            @(isReadOnly ? "readonly" : "")
            dir="ltr" />
    </div>
    
    @if (!string.IsNullOrEmpty(helpText))
    {
        <small class="text-sm text-gray-500 mt-1">@helpText</small>
    }
    
    @if (hijri)
    {
        <div class="mt-3 p-3 bg-gray-50 rounded-lg">
            <div class="date-info" data-for="@modelId">
                <span class="text-sm text-gray-600">التاريخ الهجري:</span>
                <span class="hijri-date font-medium"></span>
            </div>
        </div>
    }
    
    @if (showDay)
    {
        <div class="mt-2 p-3 bg-gray-50 rounded-lg">
            <div class="date-info" data-for="@modelId">
                <span class="text-sm text-gray-600">اليوم:</span>
                <span class="day-name font-medium"></span>
            </div>
        </div>
    }
</div>
