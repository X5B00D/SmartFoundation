@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model SmartFoundation.UI.ViewModels.SmartPage.SmartPageViewModel

@{
    Layout = null;
    ViewData["Title"] = Model.PageTitle ?? "المدن الصحية";
}
<!doctype html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>@ViewData["Title"]</title>

    <!-- Site / Tailwind -->
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <!-- SmartCharts CSS -->
    <link rel="stylesheet" href="~/css/statistics.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/smartcharts.healthkpiy.css" asp-append-version="true" />
</head>

<body class="p-6">

    @if (Model?.Charts is not null)
    {
        @await Component.InvokeAsync(
        "SmartCharts",
        new { model = Model.Charts, embedded = true }
        )
        }
    else
    {
        <div class="rounded-xl border border-slate-200 bg-white p-4">
            <div class="text-sm font-semibold text-slate-700">لا توجد بيانات لعرضها</div>
            <div class="mt-1 text-xs text-slate-500">
                تأكد من تعبئة <b>Model.Charts</b> قبل استدعاء الصفحة.
            </div>
        </div>
    }

    <!-- SmartCharts JS -->
    <script src="~/js/smartcharts.healthkpiy.js" asp-append-version="true"></script>


    <script>
        (function () {
            document.querySelectorAll('.smart-healthkpipulse[id]').forEach(function (el) {
                if (window.SmartCharts && SmartCharts.renderHealthKpiPulse) {
                    SmartCharts.renderHealthKpiPulse(el.id);
                }
            });
        })();
    </script>

    <script>
        (function () {
            document.querySelectorAll('.smart-healthkpiannual[id]').forEach(function (el) {
                if (window.SmartCharts && SmartCharts.renderHealthKpiAnnual) {
                    SmartCharts.renderHealthKpiAnnual(el.id);
                }
            });
        })();
    </script>
    <footer class="-mt-6 pt-3 text-center text-sm text-slate-600">
        إدارة مدينة الملك فيصل العسكرية للتشغيل والصيانة - قسم الحاسب الآلي © 2026
    </footer>
</body>
</html>
