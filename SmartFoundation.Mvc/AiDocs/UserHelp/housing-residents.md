# صفحة المستفيدين (Housing / Residents)

الرابط: /Housing/Residents  
الواجهة: SmartTable + SmartForm (مودالات إضافة/تعديل/حذف)  
الجدول يدعم: بحث سريع، تصدير Excel/PDF، وطباعة تقرير.

---

## ما الذي يظهر في الجدول؟
أهم الأعمدة (قد تختلف حسب الداتا):
- الرقم المرجعي
- رقم الهوية
- الرقم العام
- الرتبة
- الوحدة (قد يكون النص طويل ويتم تقصيره)
- الحالة الاجتماعية
- عدد التابعين
- الجنسية
- الجنس
- الاسم بالعربي / بالانجليزي
- تاريخ الميلاد
- رقم الجوال
- ملاحظات (قد يكون النص طويل ويتم تقصيره)

---

## البحث عن مستفيد
1) من أعلى الجدول استخدم مربع **بحث**.
2) اكتب (رقم الهوية / الرقم العام / الاسم) ثم Enter.
3) النتائج تتفلتر مباشرة داخل الجدول.

ملاحظة: البحث يعتمد على أول مجموعة حقول سريعة من الجدول (QuickSearch).

---

## إضافة مستفيد
(يظهر زر الإضافة فقط إذا لديك صلاحية INSERT)

1) اضغط زر **إضافة مستفيد**.
2) تظهر نافذة بعنوان: **إدخال بيانات مستفيد جديد**.
3) عبّئ الحقول المطلوبة ثم اضغط **حفظ**.

### الحقول المهمة في الإضافة
- رقم الهوية (National ID)
- الرقم العام (إلزامي)
- الاسم الأول/الأب/الجد/العائلة بالعربي (إلزامية)
- (اختياري) الأسماء بالانجليزي
- الرتبة (قائمة)
- الوحدة (قائمة)
- الحالة الاجتماعية (قائمة)
- الجنسية (قائمة)
- عدد التابعين
- الجنس (قائمة)
- تاريخ الميلاد
- رقم الجوال (إلزامي) مثال: 05XXXXXXXX
- ملاحظات

---

## تعديل مستفيد
(يظهر زر التعديل فقط إذا لديك صلاحية UPDATE)

مهم: التعديل عندك يتطلب **تحديد صف واحد**.

1) حدِّد المستفيد من الجدول (اختيار الصف).
2) من قائمة الإجراءات اختر: **تعديل بيانات مستفيد**.
3) تظهر نافذة بعنوان: **تعديل بيانات مستفيد**.
4) عدّل البيانات المطلوبة.
5) اضغط **حفظ التعديلات**.

ملاحظات:
- رقم الهوية في التعديل يكون للعرض/غير قابل للتعديل (Readonly).
- يجب تحديد صف واحد فقط (MinSelection=1, MaxSelection=1).

---

## حذف مستفيد
(يظهر زر الحذف فقط إذا لديك صلاحية DELETE)

مهم: الحذف يتطلب **تحديد صف واحد**.

1) حدِّد المستفيد من الجدول.
2) من قائمة الإجراءات اختر: **حذف بيانات مستفيد**.
3) تظهر رسالة تحذير: **هل أنت متأكد من حذف بيانات المستفيد؟**
4) اضغط **حذف** للتأكيد أو **إلغاء** للرجوع.

---

## طباعة تقرير المستفيدين
يوجد زر مخصص للطباعة:
- **طباعة تقرير**

1) اضغط **طباعة تقرير**.
2) يتم توليد PDF (pdf=1) ويعرض التقرير داخل المتصفح (inline).

محتوى التقرير عادة يتضمن:
- رقم الهوية
- الاسم
- الرقم العام
- الرتبة
- الوحدة
- الحالة الاجتماعية
- عدد التابعين
- الجنسية
- الجنس
- تاريخ الميلاد
- رقم الجوال

---

## تصدير البيانات (Excel / PDF)
من قائمة الإجراءات (Actions Menu):
- **تصدير Excel**
- **تصدير PDF**

1) افتح قائمة الإجراءات.
2) اختر نوع التصدير المطلوب.

---

## عرض التفاصيل
يوجد إجراء: **عرض التفاصيل**
- يتطلب تحديد صف واحد.
- يعرض نافذة بعنوان: **تفاصيل المستفيد**.

(إذا لم تظهر تفاصيل، تأكد أنك محدد صف واحد فقط)

---

## مشاكل شائعة وحلولها
### لا يظهر زر (إضافة/تعديل/حذف)
السبب غالبًا: صلاحيات المستخدم.
- INSERT: لإظهار إضافة
- UPDATE: لإظهار تعديل
- DELETE: لإظهار حذف

### لا يعمل زر تعديل/حذف
- يجب اختيار صف واحد فقط من الجدول قبل تنفيذ الإجراء.

### تظهر رسالة حقول إلزامية
- تأكد من تعبئة: الرقم العام، الأسماء العربية الأساسية، الرتبة، الوحدة، الحالة الاجتماعية، الجنسية، الجنس، رقم الجوال (حسب الإلزام في النموذج).

---

## كلمات مفتاحية
Tags: Housing, Residents, مستفيد, مستفيدين, إضافة مستفيد, تعديل مستفيد, حذف مستفيد, طباعة تقرير, تصدير Excel, تصدير PDF, بحث
